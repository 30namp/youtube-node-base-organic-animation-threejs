// index.html
<!DOCTYPE html>
<html>
  <head>
    <title>My First Shader</title>
  </head>
  <body>
    <canvas id="myCanvas"></canvas>
    <script src="https://threejs.org/build/three.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>

<script>
  // script.js
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(
    75,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
  );
  const renderer = new THREE.WebGLRenderer({
    canvas: document.getElementById("myCanvas"),
  });

  const geometry = new THREE.SphereGeometry(1, 32, 32);

  fetch("./fragment.glsl")
    .then((res) => res.text())
    .then((fragmentShader) => {
      const vertexShader = `
        varying vec2 vUv;

        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `;

      const material = new THREE.ShaderMaterial({
        vertexShader,
        fragmentShader,
      });

      const sphere = new THREE.Mesh(geometry, material);
      scene.add(sphere);

      camera.position.z = 3;

      function animate() {
        requestAnimationFrame(animate);
        renderer.render(scene, camera);
      }

      animate();
    });
</script>
